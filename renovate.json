{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
        "config:recommended"
    ],
    "enabledManagers": [
        "custom.regex"
    ],
    "timezone": "UTC",
    "prConcurrentLimit": 5,
    "gitAuthor": "rtfm-47 <rtfm47@lando.dev>",
    "customManagers": [
        {
            "customType": "regex",
            "fileMatch": [
                "builders/builders\\.yml$"
            ],
            "matchStrings": [
                "  version: '(?<currentValue>.*?)'"
            ],
            "depNameTemplate": "golang",
            "datasourceTemplate": "docker",
            "versioningTemplate": "loose"
        },
        {
            "customType": "regex",
            "fileMatch": [
                "builders/builders\\.yml$"
            ],
            "matchStrings": [
                "  supported:[\\s\\S]*?    - '(?<currentValue>.*?)'"
            ],
            "depNameTemplate": "golang-latest-supported",
            "datasourceTemplate": "docker",
            "packageNameTemplate": "golang",
            "versioningTemplate": "loose"
        },
        {
            "customType": "regex",
            "fileMatch": [
                "README\\.md$",
                "docs/.*\\.md$",
                "examples/.*/.lando\\.yml$"
            ],
            "matchStrings": [
                "type: go:(?<currentValue>1\\.[0-9]+)"
            ],
            "depNameTemplate": "golang-in-examples",
            "datasourceTemplate": "docker",
            "packageNameTemplate": "golang",
            "versioningTemplate": "loose"
        }
    ],
    "packageRules": [
        {
            "matchPackageNames": [
                "golang"
            ],
            "matchDatasources": [
                "docker"
            ],
            "groupName": "golang versions",
            "schedule": [
                "after 3:15am and before 5am on monday"
            ],
            "separateMinorPatch": true,
            "automerge": true,
            "platformAutomerge": true,
            "labels": [
                "dependencies",
                "golang"
            ],
            "versioning": "loose",
            "allowedVersions": "^1"
        },
        {
            "matchPackageNames": [
                "golang-latest-supported"
            ],
            "matchDatasources": [
                "docker"
            ],
            "groupName": "golang versions",
            "schedule": [
                "after 3:15am and before 5am on monday"
            ],
            "separateMinorPatch": false,
            "automerge": true,
            "platformAutomerge": true,
            "labels": [
                "dependencies",
                "golang"
            ],
            "versioning": "loose",
            "allowedVersions": "^1"
        },
        {
            "matchPackageNames": [
                "golang-in-examples"
            ],
            "matchDatasources": [
                "docker"
            ],
            "groupName": "golang versions",
            "schedule": [
                "after 3:15am and before 5am on monday"
            ],
            "separateMinorPatch": false,
            "automerge": true,
            "platformAutomerge": true,
            "labels": [
                "dependencies",
                "golang"
            ],
            "versioning": "loose",
            "allowedVersions": "^1"
        }
    ],
    "prBodyTemplate": "{{{header}}}{{{table}}}{{{notes}}}{{{changelogs}}}{{{controls}}}{{{footer}}}",
    "prFooter": "These are the droids you are looking for: [Renovate](https://renovatebot.com) ðŸ¤–",
    "updateInternalDeps": true,
    "postUpgradeTasks": {
        "commands": [
            "if [[ \"${depName}\" == \"golang-latest-supported\" ]]; then MAJOR_MINOR=$(echo \"${newVersion}\" | grep -oE '^[0-9]+\\.[0-9]+'); sed -i \"/  supported:/a\\    - '${MAJOR_MINOR}'\" builders/builders.yml; echo \"## [${MAJOR_MINOR}] - $(date +%Y-%m-%d)\\n\\n### Changed\\n\\n* Added Go ${MAJOR_MINOR} to supported versions\\n* Updated documentation and examples to reference Go ${MAJOR_MINOR} as the latest version\\n\" >> CHANGELOG.md; fi"
        ],
        "fileFilters": [
            "CHANGELOG.md",
            "builders/builders.yml"
        ],
        "executionMode": "update"
    }
}
